(this["webpackJsonpchess-js"]=this["webpackJsonpchess-js"]||[]).push([[0],{12:function(e,t,i){e.exports=i(18)},17:function(e,t,i){},18:function(e,t,i){"use strict";i.r(t);var a=i(0),s=i.n(a),c=i(11),n=i.n(c),l=(i(17),i(9)),r=i(1),h=i(2),o=i(3),u=i(6),p=i(4),k=i(5),b=function(e){Object(k.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"renderButton",value:function(){return null===this.props.isWhiteTurn?s.a.createElement("span",null,"N/A"):s.a.createElement("button",{className:"turnButton ".concat(this.props.isWhiteTurn?"whiteButton":"blackButton")})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"alignHorizontal adjustGameWidth"},s.a.createElement("button",{onClick:this.props.onGenerateNewBoard},"New game"),s.a.createElement("div",{className:"alignHorizontal"},s.a.createElement("span",null,"Turn : "),this.renderButton())),s.a.createElement("div",{className:"alignHorizontal adjustGameWidth"},s.a.createElement("span",null,"White Status : ",null===this.props.whiteState?"N/A":this.props.whiteState),s.a.createElement("span",null,"Black Status : ",null===this.props.blackState?"N/A":this.props.blackState)))}}]),i}(s.a.Component),v=function(e){Object(k.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){var e=this;return s.a.createElement("table",null,s.a.createElement("tbody",null,this.props.actualBoard.map((function(t,i){return s.a.createElement("tr",{key:i},t.map((function(t){return s.a.createElement("td",{onClick:function(){return e.props.onTileClick(t)},key:t.id,className:"tile ".concat(t.color).concat(null!==t.piece?" ".concat(t.piece):"").concat(t.activeState?" activeState":"").concat(e.props.focus===t.id?" onFocus":""),id:"".concat(t.id)})})))}))))}}]),i}(s.a.Component),d=function(e){Object(k.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"render",value:function(){return s.a.createElement("div",{className:"deathBox ".concat(this.props.isWhite?"whiteTaken":"blackTaken")},this.props.pieces.map((function(e,t){return s.a.createElement("span",{key:t,className:"tile ".concat(e)})})))}}]),i}(s.a.Component),f=function(e){Object(k.a)(i,e);var t=Object(p.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(o.a)(i,[{key:"renderSelection",value:function(){var e=this,t="".concat(this.props.colorSelect?"white":"black","Queen"),i="".concat(this.props.colorSelect?"white":"black","Rook"),a="".concat(this.props.colorSelect?"white":"black","Bishop"),c="".concat(this.props.colorSelect?"white":"black","Knight");return this.props.selection?s.a.createElement("div",null,s.a.createElement("p",null,"Please select a promotion for your pawn"),s.a.createElement("table",null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{onClick:function(){return e.props.onPromoteClick(t)},className:"tile ".concat(t)}),s.a.createElement("td",{onClick:function(){return e.props.onPromoteClick(i)},className:"tile ".concat(i)}),s.a.createElement("td",{onClick:function(){return e.props.onPromoteClick(a)},className:"tile ".concat(a)}),s.a.createElement("td",{onClick:function(){return e.props.onPromoteClick(c)},className:"tile ".concat(c)}))))):""}},{key:"render",value:function(){return s.a.createElement("div",null,this.renderSelection())}}]),i}(s.a.Component);function y(e,t){if(e.includes(t)){for(var i=[],a=0;a<e.length;a++)e[a]!==t&&i.push(e[a]);return i}return e}var w=function(e){Object(k.a)(i,e);var t=Object(p.a)(i);function i(e){var a;Object(h.a)(this,i),(a=t.call(this,e)).generateNewBoardHandler=a.generateNewBoardHandler.bind(Object(u.a)(a)),a.clickTileHandler=a.clickTileHandler.bind(Object(u.a)(a)),a.clickPromotionHandler=a.clickPromotionHandler.bind(Object(u.a)(a));for(var s=[],c=0;c<8;c++){for(var n=[],l=0;l<8;l++)n[l]={id:"".concat(8-c).concat(String.fromCharCode(65+l)),color:c%2===0&&l%2===0||c%2!==0&&l%2!==0?"colorWhite":"colorBlack",activeState:!1,piece:null};s[c]=n}return a.previousMoves=[],a.state={actualBoard:s,whiteTaken:[],blackTaken:[],isWhiteTurn:null,focus:null,whiteState:null,blackState:null,promotionInProgress:!1,castleData:{whiteKingHasMoved:null,whiteRookHasMovedLeft:null,whiteRookHasMovedRight:null,blackKingHasMoved:null,blackRookHasMovedLeft:null,blackRookHasMovedRight:null}},a}return Object(o.a)(i,[{key:"generateNewBoardHandler",value:function(){for(var e=JSON.parse(JSON.stringify(this.state.actualBoard)),t=0;t<8;t++){var i,a=Object(r.a)(e[t]);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.piece=null,s.activeState=!1}}catch(c){a.e(c)}finally{a.f()}}e[0][0].piece="blackRook",e[0][1].piece="blackKnight",e[0][2].piece="blackBishop",e[0][3].piece="blackQueen",e[0][4].piece="blackKing",e[0][5].piece="blackBishop",e[0][6].piece="blackKnight",e[0][7].piece="blackRook",e[1][0].piece="blackPawn",e[1][1].piece="blackPawn",e[1][2].piece="blackPawn",e[1][3].piece="blackPawn",e[1][4].piece="blackPawn",e[1][5].piece="blackPawn",e[1][6].piece="blackPawn",e[1][7].piece="blackPawn",e[7][0].piece="whiteRook",e[7][1].piece="whiteKnight",e[7][2].piece="whiteBishop",e[7][3].piece="whiteQueen",e[7][4].piece="whiteKing",e[7][5].piece="whiteBishop",e[7][6].piece="whiteKnight",e[7][7].piece="whiteRook",e[6][0].piece="whitePawn",e[6][1].piece="whitePawn",e[6][2].piece="whitePawn",e[6][3].piece="whitePawn",e[6][4].piece="whitePawn",e[6][5].piece="whitePawn",e[6][6].piece="whitePawn",e[6][7].piece="whitePawn",this.setState({isWhiteTurn:!0,whiteState:"Safe",blackState:"Safe",actualBoard:e,focus:null,whiteTaken:[],blackTaken:[],possibleEnPassant:{x:null,y:null},castleData:{whiteKingHasMoved:!1,whiteRookHasMovedLeft:!1,whiteRookHasMovedRight:!1,blackKingHasMoved:!1,blackRookHasMovedLeft:!1,blackRookHasMovedRight:!1}})}},{key:"clickTileHandler",value:function(e){if(!this.state.promotionInProgress)if(null===this.state.focus){if(null===e.piece)return;switch(e.piece){case"whitePawn":this.state.isWhiteTurn&&this.pawnPossibleMoves(e.id,!0);break;case"blackPawn":this.state.isWhiteTurn||this.pawnPossibleMoves(e.id,!1);break;case"whiteKnight":this.state.isWhiteTurn&&this.knightPossibleMoves(e.id,!0);break;case"blackKnight":this.state.isWhiteTurn||this.knightPossibleMoves(e.id,!1);break;case"whiteRook":this.state.isWhiteTurn&&this.rookPossibleMoves(e.id,!0);break;case"blackRook":this.state.isWhiteTurn||this.rookPossibleMoves(e.id,!1);break;case"whiteBishop":this.state.isWhiteTurn&&this.bishopPossibleMoves(e.id,!0);break;case"blackBishop":this.state.isWhiteTurn||this.bishopPossibleMoves(e.id,!1);break;case"whiteQueen":this.state.isWhiteTurn&&this.queenPossibleMoves(e.id,!0);break;case"blackQueen":this.state.isWhiteTurn||this.queenPossibleMoves(e.id,!1);break;case"whiteKing":this.state.isWhiteTurn&&this.kingPossibleMoves(e.id,!0);break;case"blackKing":this.state.isWhiteTurn||this.kingPossibleMoves(e.id,!1)}}else{var t=JSON.parse(JSON.stringify(this.state.actualBoard));if(e.id===this.state.focus){var i,a=Object(r.a)(t);try{for(a.s();!(i=a.n()).done;){var s,c=i.value,n=Object(r.a)(c);try{for(n.s();!(s=n.n()).done;){s.value.activeState=!1}}catch(l){n.e(l)}finally{n.f()}}}catch(l){a.e(l)}finally{a.f()}this.setState({actualBoard:t,focus:null})}else e.activeState&&this.generateNextBoard(e,t)}}},{key:"clickPromotionHandler",value:function(e){var t=this,i=JSON.parse(JSON.stringify(this.state.actualBoard)),a=this.state.focus.charCodeAt(1)-65;i[8-Number(this.state.focus[0])][a].piece=e;var s=this.isKingThreatened(i,!0),c=this.isKingThreatened(i,!1);this.setState({actualBoard:i,focus:null,isWhiteTurn:!this.state.isWhiteTurn,whiteState:s?"Check":"Safe",blackState:c?"Check":"Safe",promotionInProgress:!1},(function(){t.isCheckMate(t.state.isWhiteTurn)&&window.vex.dialog.alert("".concat(t.state.isWhiteTurn?"Black":"White"," wins !"))}))}},{key:"generateNextBoard",value:function(e){var t,i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:this.state.focus.charCodeAt(1)-65,y:8-Number(this.state.focus[0])},n=this.state.whiteTaken.slice(),l=this.state.blackTaken.slice(),h=e.id.charCodeAt(1)-65,o=8-Number(e.id[0]),u=c.x,p=c.y,k=a[p][u].piece,b=a[o][h].piece,v=0;k.endsWith("Pawn")&&(u-1===h&&p-1===o||u-1===h&&p+1===o||u+1===h&&p-1===o||u+1===h&&p+1===o)&&null===b&&(u-1===h?(t=a[p][u-1].piece,a[p][u-1].piece=null):u+1===h&&(t=a[p][u+1].piece,a[p][u+1].piece=null),null!==t&&(t.startsWith("white")?n.push(t):l.push(t)));!k.endsWith("Pawn")||u!==h||p+2!==o&&p-2!==o?this.setState({possibleEnPassant:{x:null,y:null}}):this.setState({possibleEnPassant:{x:h,y:o}}),null!==b&&(b.startsWith("white")?n.push(b):l.push(b)),k.endsWith("King")&&u+2===h?(v=2,a[p][u+3].piece=null,a[o][h-1].piece="".concat(k.startsWith("white")?"white":"black","Rook")):k.endsWith("King")&&u-2===h&&(v=1,a[p][u-4].piece=null,a[o][h+1].piece="".concat(k.startsWith("white")?"white":"black","Rook")),a[p][u].piece=null,a[o][h].piece=k;var d,f=Object(r.a)(a);try{for(f.s();!(d=f.n()).done;){var y,w=d.value,W=Object(r.a)(w);try{for(W.s();!(y=W.n()).done;){var g=y.value;g.activeState=!1}}catch(N){W.e(N)}finally{W.f()}}}catch(N){f.e(N)}finally{f.f()}var S=this.isKingThreatened(a,!0),x=this.isKingThreatened(a,!1);if(s)return a;if(k.endsWith("Pawn")&&(k.startsWith("white")?0===o:7===o))this.setState({actualBoard:a,focus:e.id,whiteTaken:n,blackTaken:l,whiteState:S?"Check":"Safe",blackState:x?"Check":"Safe",promotionInProgress:!0});else{var m=k.startsWith("white")?"white":"black",O=JSON.parse(JSON.stringify(this.state.castleData));0===v?k.endsWith("King")&&!O["".concat(m,"KingHasMoved")]?O["".concat(m,"KingHasMoved")]=!0:k.endsWith("Rook")&&!O["".concat(m,"RookHasMovedLeft")]&&0===u&&(k.startsWith("white")?7===p:0===p)?O["".concat(m,"RookHasMovedLeft")]=!0:k.endsWith("Rook")&&!O["".concat(m,"RookHasMovedRight")]&&7===u&&(k.startsWith("white")?7===p:0===p)&&(O["".concat(m,"RookHasMovedRight")]=!0):1===v?(O["".concat(m,"KingHasMoved")]=!0,O["".concat(m,"RookHasMovedLeft")]=!0):2===v&&(O["".concat(m,"KingHasMoved")]=!0,O["".concat(m,"RookHasMovedRight")]=!0),this.setState({actualBoard:a,focus:null,whiteTaken:n,blackTaken:l,isWhiteTurn:!this.state.isWhiteTurn,whiteState:S?"Check":"Safe",blackState:x?"Check":"Safe",castleData:O},(function(){i.isCheckMate(i.state.isWhiteTurn)&&window.vex.dialog.alert("".concat(i.state.isWhiteTurn?"Black":"White"," wins !"))}))}}},{key:"pawnPossibleMoves",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=[],c=e.charCodeAt(1)-65,n=8-Number(e[0]);if(2===i){var l=[];return t?n-1>=0&&(c-1>=0&&l.push({x:c-1,y:n-1}),c+1<=7&&l.push({x:c+1,y:n-1})):n+1<=7&&(c-1>=0&&l.push({x:c-1,y:n+1}),c+1<=7&&l.push({x:c+1,y:n+1})),l}if(t?6===n?(null===a[n-1][c].piece&&(s.push({x:c,y:n-1}),null===a[n-2][c].piece&&s.push({x:c,y:n-2})),c+1<=7&&null!==a[n-1][c+1].piece&&a[n-1][c+1].piece.startsWith("black")&&s.push({x:c+1,y:n-1}),c-1>=0&&null!==a[n-1][c-1].piece&&a[n-1][c-1].piece.startsWith("black")&&s.push({x:c-1,y:n-1})):n-1>=0&&(null===a[n-1][c].piece&&s.push({x:c,y:n-1}),c+1<=7&&(null!==a[n-1][c+1].piece&&a[n-1][c+1].piece.startsWith("black")||null!==a[n][c+1].piece&&a[n][c+1].piece.startsWith("black")&&n===this.state.possibleEnPassant.y&&c+1===this.state.possibleEnPassant.x)&&s.push({x:c+1,y:n-1}),c-1>=0&&(null!==a[n-1][c-1].piece&&a[n-1][c-1].piece.startsWith("black")||null!==a[n][c-1].piece&&a[n][c-1].piece.startsWith("black")&&n===this.state.possibleEnPassant.y&&c-1===this.state.possibleEnPassant.x)&&s.push({x:c-1,y:n-1})):1===n?(null===a[n+1][c].piece&&(s.push({x:c,y:n+1}),null===a[n+2][c].piece&&s.push({x:c,y:n+2})),c+1<=7&&null!==a[n+1][c+1].piece&&a[n+1][c+1].piece.startsWith("white")&&s.push({x:c+1,y:n+1}),c-1>=0&&null!==a[n+1][c-1].piece&&a[n+1][c-1].piece.startsWith("white")&&s.push({x:c-1,y:n+1})):n+1<=7&&(null===a[n+1][c].piece&&s.push({x:c,y:n+1}),c+1<=7&&(null!==a[n+1][c+1].piece&&a[n+1][c+1].piece.startsWith("white")||null!==a[n][c+1].piece&&a[n][c+1].piece.startsWith("white")&&n===this.state.possibleEnPassant.y&&c+1===this.state.possibleEnPassant.x)&&s.push({x:c+1,y:n+1}),c-1>=0&&(null!==a[n+1][c-1].piece&&a[n+1][c-1].piece.startsWith("white")||null!==a[n][c-1].piece&&a[n][c-1].piece.startsWith("white")&&n===this.state.possibleEnPassant.y&&c-1===this.state.possibleEnPassant.x)&&s.push({x:c-1,y:n+1})),0===i){s=this.removeCheckMateMoves(s,{x:c,y:n},t,a);var h,o=Object(r.a)(s);try{for(o.s();!(h=o.n()).done;){var u=h.value;a[u.y][u.x].activeState=!0}}catch(p){o.e(p)}finally{o.f()}this.setState({actualBoard:a,focus:e})}else if(1===i)return s}},{key:"knightPossibleMoves",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=[],c=e.charCodeAt(1)-65,n=8-Number(e[0]);if(n+2<8?(c+2<8?((null===a[n+2][c+1].piece||(t?a[n+2][c+1].piece.startsWith("black"):a[n+2][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n+2}),(null===a[n+1][c+2].piece||(t?a[n+1][c+2].piece.startsWith("black"):a[n+1][c+2].piece.startsWith("white")))&&s.push({x:c+2,y:n+1})):c+1<8&&(null===a[n+2][c+1].piece||(t?a[n+2][c+1].piece.startsWith("black"):a[n+2][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n+2}),c-2>=0?((null===a[n+2][c-1].piece||(t?a[n+2][c-1].piece.startsWith("black"):a[n+2][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n+2}),(null===a[n+1][c-2].piece||(t?a[n+1][c-2].piece.startsWith("black"):a[n+1][c-2].piece.startsWith("white")))&&s.push({x:c-2,y:n+1})):c-1>=0&&(null===a[n+2][c-1].piece||(t?a[n+2][c-1].piece.startsWith("black"):a[n+2][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n+2})):n+1<8&&(c+2<8&&(null===a[n+1][c+2].piece||(t?a[n+1][c+2].piece.startsWith("black"):a[n+1][c+2].piece.startsWith("white")))&&s.push({x:c+2,y:n+1}),c-2>=0&&(null===a[n+1][c-2].piece||(t?a[n+1][c-2].piece.startsWith("black"):a[n+1][c-2].piece.startsWith("white")))&&s.push({x:c-2,y:n+1})),n-2>=0?(c+2<8?((null===a[n-2][c+1].piece||(t?a[n-2][c+1].piece.startsWith("black"):a[n-2][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n-2}),(null===a[n-1][c+2].piece||(t?a[n-1][c+2].piece.startsWith("black"):a[n-1][c+2].piece.startsWith("white")))&&s.push({x:c+2,y:n-1})):c+1<8&&(null===a[n-2][c+1].piece||(t?a[n-2][c+1].piece.startsWith("black"):a[n-2][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n-2}),c-2>=0?((null===a[n-2][c-1].piece||(t?a[n-2][c-1].piece.startsWith("black"):a[n-2][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n-2}),(null===a[n-1][c-2].piece||(t?a[n-1][c-2].piece.startsWith("black"):a[n-1][c-2].piece.startsWith("white")))&&s.push({x:c-2,y:n-1})):c-1>=0&&(null===a[n-2][c-1].piece||(t?a[n-2][c-1].piece.startsWith("black"):a[n-2][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n-2})):n-1>=0&&(c-2>=0&&(null===a[n-1][c-2].piece||(t?a[n-1][c-2].piece.startsWith("black"):a[n-1][c-2].piece.startsWith("white")))&&s.push({x:c-2,y:n-1}),c+2<8&&(null===a[n-1][c+2].piece||(t?a[n-1][c+2].piece.startsWith("black"):a[n-1][c+2].piece.startsWith("white")))&&s.push({x:c+2,y:n-1})),i)return s;s=this.removeCheckMateMoves(s,{x:c,y:n},t,a);var l,h=Object(r.a)(s);try{for(h.s();!(l=h.n()).done;){var o=l.value;a[o.y][o.x].activeState=!0}}catch(u){h.e(u)}finally{h.f()}this.setState({actualBoard:a,focus:e})}},{key:"rookPossibleMoves",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=[],c=e.charCodeAt(1)-65,n=8-Number(e[0]),l=!1,h=1;!l;h++)n-h<0?l=!0:null!==a[n-h][c].piece?(t?a[n-h][c].piece.startsWith("black"):a[n-h][c].piece.startsWith("white"))?(s.push({x:c,y:n-h}),l=!0):l=!0:s.push({x:c,y:n-h});l=!1;for(var o=1;!l;o++)n+o>7?l=!0:null!==a[n+o][c].piece?(t?a[n+o][c].piece.startsWith("black"):a[n+o][c].piece.startsWith("white"))?(s.push({x:c,y:n+o}),l=!0):l=!0:s.push({x:c,y:n+o});l=!1;for(var u=1;!l;u++)c-u<0?l=!0:null!==a[n][c-u].piece?(t?a[n][c-u].piece.startsWith("black"):a[n][c-u].piece.startsWith("white"))?(s.push({x:c-u,y:n}),l=!0):l=!0:s.push({x:c-u,y:n});l=!1;for(var p=1;!l;p++)c+p>7?l=!0:null!==a[n][c+p].piece?(t?a[n][c+p].piece.startsWith("black"):a[n][c+p].piece.startsWith("white"))?(s.push({x:c+p,y:n}),l=!0):l=!0:s.push({x:c+p,y:n});if(i)return s;s=this.removeCheckMateMoves(s,{x:c,y:n},t,a);var k,b=Object(r.a)(s);try{for(b.s();!(k=b.n()).done;){var v=k.value;a[v.y][v.x].activeState=!0}}catch(d){b.e(d)}finally{b.f()}this.setState({actualBoard:a,focus:e})}},{key:"bishopPossibleMoves",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=[],c=e.charCodeAt(1)-65,n=8-Number(e[0]),l=!1,h=1;!l;h++)n-h<0||c+h>7?l=!0:null!==a[n-h][c+h].piece?(t?a[n-h][c+h].piece.startsWith("black"):a[n-h][c+h].piece.startsWith("white"))?(s.push({x:c+h,y:n-h}),l=!0):l=!0:s.push({x:c+h,y:n-h});l=!1;for(var o=1;!l;o++)n+o>7||c+o>7?l=!0:null!==a[n+o][c+o].piece?(t?a[n+o][c+o].piece.startsWith("black"):a[n+o][c+o].piece.startsWith("white"))?(s.push({x:c+o,y:n+o}),l=!0):l=!0:s.push({x:c+o,y:n+o});l=!1;for(var u=1;!l;u++)n+u>7||c-u<0?l=!0:null!==a[n+u][c-u].piece?(t?a[n+u][c-u].piece.startsWith("black"):a[n+u][c-u].piece.startsWith("white"))?(s.push({x:c-u,y:n+u}),l=!0):l=!0:s.push({x:c-u,y:n+u});l=!1;for(var p=1;!l;p++)n-p<0||c-p<0?l=!0:null!==a[n-p][c-p].piece?(t?a[n-p][c-p].piece.startsWith("black"):a[n-p][c-p].piece.startsWith("white"))?(s.push({x:c-p,y:n-p}),l=!0):l=!0:s.push({x:c-p,y:n-p});if(i)return s;s=this.removeCheckMateMoves(s,{x:c,y:n},t,a);var k,b=Object(r.a)(s);try{for(b.s();!(k=b.n()).done;){var v=k.value;a[v.y][v.x].activeState=!0}}catch(d){b.e(d)}finally{b.f()}this.setState({actualBoard:a,focus:e})}},{key:"queenPossibleMoves",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=e.charCodeAt(1)-65,c=8-Number(e[0]),n=this.rookPossibleMoves(e,t,!0),h=this.bishopPossibleMoves(e,t,!0),o=[].concat(Object(l.a)(n),Object(l.a)(h));if(i)return o;o=this.removeCheckMateMoves(o,{x:s,y:c},t,a);var u,p=Object(r.a)(o);try{for(p.s();!(u=p.n()).done;){var k=u.value;a[k.y][k.x].activeState=!0}}catch(b){p.e(b)}finally{p.f()}this.setState({actualBoard:a,focus:e})}},{key:"kingPossibleMoves",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.parse(JSON.stringify(this.state.actualBoard)),s=[],c=e.charCodeAt(1)-65,n=8-Number(e[0]);n-1>=0&&((null===a[n-1][c].piece||(t?a[n-1][c].piece.startsWith("black"):a[n-1][c].piece.startsWith("white")))&&s.push({x:c,y:n-1}),c+1<8&&(null===a[n-1][c+1].piece||(t?a[n-1][c+1].piece.startsWith("black"):a[n-1][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n-1}),c-1>=0&&(null===a[n-1][c-1].piece||(t?a[n-1][c-1].piece.startsWith("black"):a[n-1][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n-1})),n+1<8&&((null===a[n+1][c].piece||(t?a[n+1][c].piece.startsWith("black"):a[n+1][c].piece.startsWith("white")))&&s.push({x:c,y:n+1}),c+1<8&&(null===a[n+1][c+1].piece||(t?a[n+1][c+1].piece.startsWith("black"):a[n+1][c+1].piece.startsWith("white")))&&s.push({x:c+1,y:n+1}),c-1>=0&&(null===a[n+1][c-1].piece||(t?a[n+1][c-1].piece.startsWith("black"):a[n+1][c-1].piece.startsWith("white")))&&s.push({x:c-1,y:n+1}));var l=null,h=null;if(c+1<8&&(null===a[n][c+1].piece||(t?a[n][c+1].piece.startsWith("black"):a[n][c+1].piece.startsWith("white")))&&(s.push({x:c+1,y:n}),h=s[s.length-1]),c-1>=0&&(null===a[n][c-1].piece||(t?a[n][c-1].piece.startsWith("black"):a[n][c-1].piece.startsWith("white")))&&(s.push({x:c-1,y:n}),l=s[s.length-1]),i)return s;var o=null,u=null;(t?"Check"===this.state.whiteState||this.state.castleData.whiteKingHasMoved||this.state.castleData.whiteRookHasMovedLeft:"Check"===this.state.blackState||this.state.castleData.blackKingHasMoved||this.state.castleData.blackRookHasMovedLeft)||null===a[n][c-1].piece&&null===a[n][c-2].piece&&null===a[n][c-3].piece&&(s.push({x:c-2,y:n}),o=s[s.length-1]),(t?"Check"===this.state.whiteState||this.state.castleData.whiteKingHasMoved||this.state.castleData.whiteRookHasMovedRight:"Check"===this.state.whiteState||this.state.castleData.blackKingHasMoved||this.state.castleData.blackRookHasMovedRight)||null===a[n][c+1].piece&&null===a[n][c+2].piece&&(s.push({x:c+2,y:n}),u=s[s.length-1]),(s=this.removeCheckMateMoves(s,{x:c,y:n},t,a)).includes(u)&&!s.includes(h)&&(s=y(s,u)),s.includes(o)&&!s.includes(l)&&(s=y(s,u));var p,k=Object(r.a)(s);try{for(k.s();!(p=k.n()).done;){var b=p.value;a[b.y][b.x].activeState=!0}}catch(v){k.e(v)}finally{k.f()}this.setState({actualBoard:a,focus:e})}},{key:"isKingThreatened",value:function(e,t){for(var i=JSON.parse(JSON.stringify(e)),a=null,s=0;s<i.length;s++){for(var c=0;c<i[s].length;c++)if(t?"whiteKing"===i[s][c].piece:"blackKing"===i[s][c].piece){a={x:c,y:s};break}if(null!==a)break}if(null!==a){var n,l="".concat(8-a.y).concat(String.fromCharCode(65+a.x)),h=this.rookPossibleMoves(l,!!t,!0,JSON.parse(JSON.stringify(i))),o=Object(r.a)(h);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(i[u.y][u.x].piece===(t?"blackRook":"whiteRook")||i[u.y][u.x].piece===(t?"blackQueen":"whiteQueen"))return!0}}catch(P){o.e(P)}finally{o.f()}var p,k=this.bishopPossibleMoves(l,!!t,!0,JSON.parse(JSON.stringify(i))),b=Object(r.a)(k);try{for(b.s();!(p=b.n()).done;){var v=p.value;if(i[v.y][v.x].piece===(t?"blackBishop":"whiteBishop")||i[v.y][v.x].piece===(t?"blackQueen":"whiteQueen"))return!0}}catch(P){b.e(P)}finally{b.f()}var d,f=this.knightPossibleMoves(l,!!t,!0,JSON.parse(JSON.stringify(i))),y=Object(r.a)(f);try{for(y.s();!(d=y.n()).done;){var w=d.value;if(i[w.y][w.x].piece===(t?"blackKnight":"whiteKnight"))return!0}}catch(P){y.e(P)}finally{y.f()}var W,g=this.kingPossibleMoves(l,!!t,!0,JSON.parse(JSON.stringify(i))),S=Object(r.a)(g);try{for(S.s();!(W=S.n()).done;){var x=W.value;if(i[x.y][x.x].piece===(t?"blackKing":"whiteKing"))return!0}}catch(P){S.e(P)}finally{S.f()}var m,O=this.pawnPossibleMoves(l,!!t,2,JSON.parse(JSON.stringify(i))),N=Object(r.a)(O);try{for(N.s();!(m=N.n()).done;){var M=m.value;if(i[M.y][M.x].piece===(t?"blackPawn":"whitePawn"))return!0}}catch(P){N.e(P)}finally{N.f()}return!1}return-1}},{key:"isCheckMate",value:function(e){if("Check"===(e?this.state.whiteState:this.state.blackState)){var t,i=JSON.parse(JSON.stringify(this.state.actualBoard)),a=!0,s=[],c=Object(r.a)(i);try{for(c.s();!(t=c.n()).done;){var n,l=t.value,h=Object(r.a)(l);try{for(h.s();!(n=h.n()).done;){var o=n.value;if(null!==o.piece&&(e?o.piece.startsWith("white"):o.piece.startsWith("black"))){var u=void 0,p=o.id.charCodeAt(1)-65,k=8-Number(o.id[0]);if(o.piece.endsWith("Pawn")?u=this.pawnPossibleMoves(o.id,e,1,JSON.parse(JSON.stringify(i))):o.piece.endsWith("Rook")?u=this.rookPossibleMoves(o.id,e,!0,JSON.parse(JSON.stringify(i))):o.piece.endsWith("Knight")?u=this.knightPossibleMoves(o.id,e,!0,JSON.parse(JSON.stringify(i))):o.piece.endsWith("Bishop")?u=this.bishopPossibleMoves(o.id,e,!0,JSON.parse(JSON.stringify(i))):o.piece.endsWith("Queen")?u=this.queenPossibleMoves(o.id,e,!0,JSON.parse(JSON.stringify(i))):o.piece.endsWith("King")&&(u=this.kingPossibleMoves(o.id,e,!0,JSON.parse(JSON.stringify(i)))),u=this.removeCheckMateMoves(u,{x:p,y:k},e,i),(s=[].concat(s,u)).length>0){a=!1;break}}}}catch(b){h.e(b)}finally{h.f()}if(!a)break}}catch(b){c.e(b)}finally{c.f()}return!!a&&!(s.length>0)}return!1}},{key:"removeCheckMateMoves",value:function(e,t,i,a){var s,c=[],n=Object(r.a)(e);try{for(n.s();!(s=n.n()).done;){var l=s.value,h=a[l.y][l.x],o=this.generateNextBoard(h,JSON.parse(JSON.stringify(a)),!0,t);this.isKingThreatened(o,i)&&c.push(l)}}catch(k){n.e(k)}finally{n.f()}for(var u=0,p=c;u<p.length;u++){e=y(e,p[u])}return e}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b,{onGenerateNewBoard:this.generateNewBoardHandler,isWhiteTurn:this.state.isWhiteTurn,whiteState:this.state.whiteState,blackState:this.state.blackState}),s.a.createElement("div",{className:"gameDisplay"},s.a.createElement(d,{pieces:this.state.whiteTaken,isWhite:!0}),s.a.createElement(v,{actualBoard:this.state.actualBoard,onTileClick:this.clickTileHandler,focus:this.state.focus}),s.a.createElement(d,{pieces:this.state.blackTaken,isWhite:!1})),s.a.createElement(f,{onPromoteClick:this.clickPromotionHandler,selection:this.state.promotionInProgress,colorSelect:this.state.isWhiteTurn}))}}]),i}(s.a.Component);n.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.cb275e62.chunk.js.map